(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{375:function(s,t,a){"use strict";a.r(t);var e=a(19),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"vuepress搭建技术博客指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuepress搭建技术博客指南"}},[s._v("#")]),s._v(" vuepress搭建技术博客指南")]),s._v(" "),a("h2",{attrs:{id:"首先安装vuepress"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#首先安装vuepress"}},[s._v("#")]),s._v(" 首先安装vuepress")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" vuepress -g  或者： "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i vuepress -g\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建项目目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" vuepress-starter\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" vuepress-starter\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建一个 docs 文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" docs\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建一个 markdown 文件 README.md是项目的首页对应的markdown文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'# Hello VuePress!'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docs/README.md\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开始写作")]),s._v("\nnpx vuepress dev docs\n\n")])])]),a("p",[s._v("经过上述步骤后vuepress将启动一个本地的node服务，打开浏览器，根据提示输入http://localhost:8080， 端口号默认8080，可以看到README.md文件渲染出来的Hello VuePress!几个字。")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("下一步，还没有package.json文件，使用npm init -y快速生成一个package.json文件")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init -y\n")])])]),a("p",[s._v("接着，在 package.json 里的scripts选项加以下脚本:")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"docs:dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vuepress dev docs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"docs:build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vuepress build docs"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("运行以下命令，启动本地服务，然后就可以开始本地写作了")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" docs:dev "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者：npm run docs:dev")]),s._v("\n")])])]),a("p",[s._v("要生成静态的 HTML 文件用于部署的话，运行：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" docs:build "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者：npm run docs:build")]),s._v("\n")])])]),a("p",[s._v("默认情况下，文件将会被生成在 .vuepress/dist，当然，你也可以通过 .vuepress/config.js 中的 dest 字段来修改，生成的文件可以部署到任意的静态文件服务器上， 部署的问题稍后再讲。")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("目前为止我们只是搭建了最基本的环境，vuepress还提供了丰富的配置项，下面我们增加一些简单的配置")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" .vuepress\n\n")])])]),a("p",[s._v("在.vuepress文件夹下创建一个config.js文件，vuepress在运行时会将它作为配置文件。现在项目结构是这样：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(".\n├─ docs\n│  ├─ README.md\n│  └─ .vuepress\n│     └─ config.js\n└─ package.json\n")])])]),a("p",[s._v("config.js，它应该导出一个 JavaScript 对象：")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  title"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello VuePress'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  description"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Just playing around'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("config.js有几个重要配置项themeConfig，plugins， head，分别用于定义主体风格，插件，网页head，具体的配置项非常多，themeConfig中我们可以定义头部导航。侧边栏导航，仓库链接等信息，详情参考 "),a("a",{attrs:{href:"https://www.vuepress.cn/guide/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方指南"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[s._v("#")]),s._v(" 目录结构")]),s._v(" "),a("p",[s._v("推荐的目录结构如下")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(".\n├── docs\n│   ├── .vuepress (可选的)\n│   │   ├── components (可选的)\n│   │   ├── theme (可选的)\n│   │   │   └── Layout.vue\n│   │   ├── public (可选的)\n│   │   ├── styles (可选的)\n│   │   │   ├── index.styl\n│   │   │   └── palette.styl\n│   │   ├── templates (可选的, 谨慎配置)\n│   │   │   ├── dev.html\n│   │   │   └── ssr.html\n│   │   ├── config.js (可选的)\n│   │   └── enhanceApp.js (可选的) 客户端应用的增强\n│   │ \n│   ├── README.md\n│   ├── guide\n│   │   └── README.md\n│   └── config.md\n│ \n└── package.json\n\n")])])]),a("p",[s._v("正常情况下，.vuepress文件夹下的可选的一些配置大部分都不需要添加，对于上述的目录结构，默认页面路由地址如下：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("文件的相对路径")]),s._v(" "),a("th",[s._v("页面路由地址")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("/README.md")]),s._v(" "),a("td",[s._v("/")])]),s._v(" "),a("tr",[a("td",[s._v("/guide/README.md")]),s._v(" "),a("td",[s._v("/guide/")])]),s._v(" "),a("tr",[a("td",[s._v("/config.md")]),s._v(" "),a("td",[s._v("/config.html")])])])]),s._v(" "),a("h2",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),a("h3",{attrs:{id:"部署到github-pages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署到github-pages"}},[s._v("#")]),s._v(" 部署到github pages")]),s._v(" "),a("br"),s._v("\n1. 在 docs/.vuepress/config.js 中设置正确的 base\n"),a("br"),s._v(" "),a("ul",[a("li",[s._v("如果发布到"),a("code",[s._v("https://<USERNAME>.github.io/")]),s._v(", 则可以省略这一步，因为base默认即是"),a("code",[s._v("/")]),s._v("。")])]),s._v(" "),a("br"),s._v(" "),a("ul",[a("li",[s._v("如果发布到"),a("code",[s._v("https://<USERNAME>.github.io/<REPO>/")]),s._v("（也就是说你的仓库在"),a("code",[s._v("https://github.com/<USERNAME>/<REPO>")]),s._v("），则将base设置为"),a("code",[s._v("/<REPO>/")]),s._v("。")])]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("比如本博客的仓库地址为:"),a("code",[s._v("https://github.com/blueprint1453/blog")]),s._v(", 那么base设置为"),a("code",[s._v("/blog/")]),s._v("。")]),s._v(" "),a("br"),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("项目中，创建根目录一个如下的 deploy.sh 文件（请自行判断去掉高亮行的注释）:")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env sh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保脚本抛出遇到的错误")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" -e\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成静态文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run docs:build\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入生成的文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" docs/.vuepress/dist\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果是发布到自定义域名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo 'www.example.com' > CNAME")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -A\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deploy'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果发布到 https://<USERNAME>.github.io")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果发布到 https://<USERNAME>.github.io/<REPO> 以下两种中任意一种")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git push -f git@github.com:<USERNAME>/<REPO>.git master:gh-pages")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git push -f https://github.com/<USERNAME>/<REPO>.git master:gh-pages")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n")])])]),a("p",[s._v("这样每次你就可以运行以上脚本发布到github pages上了")]),s._v(" "),a("h3",{attrs:{id:"github-actions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-actions"}},[s._v("#")]),s._v(" github actions")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("除了上述方式，还可以使用github actions去实现自动化部署，关于github actions, 可以查看阮一峰写的一篇文章 "),a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub Actions 入门教程"),a("OutboundLink")],1),s._v(", 假设我们的整个项目在github已经建好了仓库，在github仓库中，找到actions选项，进入后点击New workflow, 再点击set up this workflow")]),s._v(" "),a("br"),s._v(" "),a("p",[s._v("在编辑器中加入以下内容")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("name:  Deploy Blog\n\non:\n  push:\n    branches:\n      - master\n\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout 🛎️\n        uses: actions/checkout@master # If you're using actions/checkout@v2 you must set persist-credentials to false in most cases for the deployment to work correctly.\n\n      - name: Install and Build 🔧 # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.\n        run: \n          sudo yarn add vuepress -g &&  yarn && sudo yarn build\n      - name: Deploy 🚀\n        uses: JamesIves/github-pages-deploy-action@3.5.7\n        with:\n          GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}\n          BRANCH: gh-pages # The branch the action should deploy to.\n          FOLDER: docs/.vuepress/dist # The folder the action should deploy.\n")])])]),a("p",[s._v("遇到的一些坑：")]),s._v(" "),a("ol",[a("li",[s._v("run字段中 开始是按照从上到下依次写的，")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("run: \nyarn add vuepress -g\nyarn\nyarn build\n")])])]),a("p",[s._v("上述步骤意图是按顺序执行，并不是并行的，但是在后面的执行过程确老是并行执行了\n"),a("br"),s._v("\n所以改成了以下方式")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("run: \nyarn add vuepress -g &&  yarn && yarn build\n")])])]),a("p",[s._v("这样就真的可以按顺序执行了。\n"),a("br"),s._v("\n但是另一个问题又来了，有时会出现权限问题\n"),a("br"),s._v("\n只能继续做绝，有报错的加上sudo，这样就解决了权限问题")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("run: \nsudo yarn add vuepress -g &&  yarn && sudo yarn build\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>了解webpack基本配置、工作流程和基本原理 | blueprint的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <meta name="description" content="专注于前端技术栈">
    
    <link rel="preload" href="/blog/assets/css/0.styles.fdd9fbbe.css" as="style"><link rel="preload" href="/blog/assets/js/app.e1155b3d.js" as="script"><link rel="preload" href="/blog/assets/js/2.e084e2b5.js" as="script"><link rel="preload" href="/blog/assets/js/44.e25e2539.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.c5d57d5c.js"><link rel="prefetch" href="/blog/assets/js/11.e2161082.js"><link rel="prefetch" href="/blog/assets/js/12.02b0561c.js"><link rel="prefetch" href="/blog/assets/js/13.2e7d9f75.js"><link rel="prefetch" href="/blog/assets/js/14.c241d11f.js"><link rel="prefetch" href="/blog/assets/js/15.e0fffdbf.js"><link rel="prefetch" href="/blog/assets/js/16.74f56b57.js"><link rel="prefetch" href="/blog/assets/js/17.0f2c938c.js"><link rel="prefetch" href="/blog/assets/js/18.c98b3546.js"><link rel="prefetch" href="/blog/assets/js/19.36b7bdef.js"><link rel="prefetch" href="/blog/assets/js/20.de2a05eb.js"><link rel="prefetch" href="/blog/assets/js/21.28740062.js"><link rel="prefetch" href="/blog/assets/js/22.a8a9d5b3.js"><link rel="prefetch" href="/blog/assets/js/23.eaf385c8.js"><link rel="prefetch" href="/blog/assets/js/24.955d31b8.js"><link rel="prefetch" href="/blog/assets/js/25.51ce127f.js"><link rel="prefetch" href="/blog/assets/js/26.2a479d64.js"><link rel="prefetch" href="/blog/assets/js/27.a11271df.js"><link rel="prefetch" href="/blog/assets/js/28.723c207d.js"><link rel="prefetch" href="/blog/assets/js/29.701ac066.js"><link rel="prefetch" href="/blog/assets/js/3.99ddefb0.js"><link rel="prefetch" href="/blog/assets/js/30.22d87742.js"><link rel="prefetch" href="/blog/assets/js/31.4416ef4f.js"><link rel="prefetch" href="/blog/assets/js/32.0b4ea51f.js"><link rel="prefetch" href="/blog/assets/js/33.bf0ad99e.js"><link rel="prefetch" href="/blog/assets/js/34.c003baf8.js"><link rel="prefetch" href="/blog/assets/js/35.57bedc2d.js"><link rel="prefetch" href="/blog/assets/js/36.d8938f8d.js"><link rel="prefetch" href="/blog/assets/js/37.b0f43c4d.js"><link rel="prefetch" href="/blog/assets/js/38.0fbbf80a.js"><link rel="prefetch" href="/blog/assets/js/39.195ebfd2.js"><link rel="prefetch" href="/blog/assets/js/4.67a6cbd6.js"><link rel="prefetch" href="/blog/assets/js/40.4409029a.js"><link rel="prefetch" href="/blog/assets/js/41.746245b5.js"><link rel="prefetch" href="/blog/assets/js/42.e8ffeee3.js"><link rel="prefetch" href="/blog/assets/js/43.1582ee8a.js"><link rel="prefetch" href="/blog/assets/js/45.608b7e05.js"><link rel="prefetch" href="/blog/assets/js/46.4bd705d6.js"><link rel="prefetch" href="/blog/assets/js/47.0a9a8ce1.js"><link rel="prefetch" href="/blog/assets/js/48.1d30afa8.js"><link rel="prefetch" href="/blog/assets/js/49.d38dc84f.js"><link rel="prefetch" href="/blog/assets/js/5.dca624c9.js"><link rel="prefetch" href="/blog/assets/js/50.355e4aa1.js"><link rel="prefetch" href="/blog/assets/js/51.576dcf9a.js"><link rel="prefetch" href="/blog/assets/js/52.1605cc7c.js"><link rel="prefetch" href="/blog/assets/js/53.a04db568.js"><link rel="prefetch" href="/blog/assets/js/54.00ecc1a0.js"><link rel="prefetch" href="/blog/assets/js/55.0e27cacc.js"><link rel="prefetch" href="/blog/assets/js/56.0cad45b1.js"><link rel="prefetch" href="/blog/assets/js/57.2b407340.js"><link rel="prefetch" href="/blog/assets/js/6.61763df9.js"><link rel="prefetch" href="/blog/assets/js/7.a5baa94d.js"><link rel="prefetch" href="/blog/assets/js/8.750865d4.js"><link rel="prefetch" href="/blog/assets/js/9.cf2b9c2c.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.fdd9fbbe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">blueprint的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/javascript/" class="nav-link">
  js笔记
</a></li><li class="dropdown-item"><!----> <a href="/blog/html/" class="nav-link">
  html和浏览器
</a></li><li class="dropdown-item"><!----> <a href="/blog/css/" class="nav-link">
  css笔记
</a></li><li class="dropdown-item"><!----> <a href="/blog/regexp/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js框架和库" class="dropdown-title"><span class="title">js框架和库</span> <span class="arrow down"></span></button> <button type="button" aria-label="js框架和库" class="mobile-dropdown-title"><span class="title">js框架和库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link">
  vue专题
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/" class="nav-link">
  react专题
</a></li><li class="dropdown-item"><!----> <a href="/blog/redux/" class="nav-link">
  redux
</a></li><li class="dropdown-item"><!----> <a href="/blog/axios/" class="nav-link">
  axios
</a></li></ul></div></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  面试题
</a></div> <a href="https://github.com/blueprint1453/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/javascript/" class="nav-link">
  js笔记
</a></li><li class="dropdown-item"><!----> <a href="/blog/html/" class="nav-link">
  html和浏览器
</a></li><li class="dropdown-item"><!----> <a href="/blog/css/" class="nav-link">
  css笔记
</a></li><li class="dropdown-item"><!----> <a href="/blog/regexp/" class="nav-link">
  正则
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js框架和库" class="dropdown-title"><span class="title">js框架和库</span> <span class="arrow down"></span></button> <button type="button" aria-label="js框架和库" class="mobile-dropdown-title"><span class="title">js框架和库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link">
  vue专题
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/" class="nav-link">
  react专题
</a></li><li class="dropdown-item"><!----> <a href="/blog/redux/" class="nav-link">
  redux
</a></li><li class="dropdown-item"><!----> <a href="/blog/axios/" class="nav-link">
  axios
</a></li></ul></div></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  面试题
</a></div> <a href="https://github.com/blueprint1453/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="了解webpack基本配置、工作流程和基本原理"><a href="#了解webpack基本配置、工作流程和基本原理" class="header-anchor">#</a> 了解webpack基本配置、工作流程和基本原理</h2> <ul><li>webpack是一个模块打包器，旨在解决前端工程化中构建，打包和编译问题。在webpack中，一切皆模块，每一个文件都是一个模块，通过webpack的打包编译最后输出一个或多个chunk，chunk是代码块，代码块有一个或多个模块经过webpack处理后输出得到。</li> <li>webpack中的重要配置项有entry、output、resolve、module、plugin、devtools以及开发环境的使用的devServer等。</li> <li>因为webpack默认可以处理的js/json模块，其他格式的模块的处理需要专门的loader处理，loader就是一个转化器，接受源文件，返回转化的结果，同一个模块可以用多个loader串行处理，最后输出的应该是一个js模块。</li> <li>webpack的插件是一个js模块，插件的原型有一个apply方法，webpack在安装插件时会注入compilier对象，这个对象拥有整个webpack的环境的所有信息，插件可以通过complier对象订阅相关的webpack事件钩子，在相应的事件钩子触发后的回调里拿到当前编译的compliation对象，步钩子还能拿到相应的 callback。</li> <li>complier对象 可以理解为webpack的总控制台，在运行 webpack 时，会自动初始化 compiler 对象，开发插件时，我们可以从 compiler 对象中拿到所有和 webpack 主环境相关的内容。</li> <li>compilation对象 对应每一次的编译任务的一个对象，含有本次编译的所有资源的相关信息，一个编译对象表现了当前的模块资源、编译生成资源、变化的文件、以及被跟踪依赖的状态信息。</li> <li>事件钩子 框架的生命周期函数，在特定阶段能做特殊的逻辑处理</li></ul> <h2 id="webpack-为何可以同时支持commonjs和es6-module的写法"><a href="#webpack-为何可以同时支持commonjs和es6-module的写法" class="header-anchor">#</a> webpack 为何可以同时支持commonjs和es6 module的写法</h2> <ul><li>打包后的代码是一个自执行函数</li> <li>自执行函数内部定义了一个缓存所有的模块的对象</li> <li>定义了__webpack_require__ 加载模块方法，该方法会执行模块内容，返回模块的结果</li> <li>定义了一系列的辅助函数，在这些辅助函数中包括标记是否为es6模块的函数</li> <li>自执行函数在最后会调用__webpack_require__加载入口模块</li> <li>commonjs模块</li></ul> <h2 id="webpack的按需加载的实现原理-import-调用"><a href="#webpack的按需加载的实现原理-import-调用" class="header-anchor">#</a> webpack的按需加载的实现原理（import（）调用）</h2> <ul><li><p>定义了全局的installChunks缓存动态导入的模块</p></li> <li><p>定义了加载动态模块的方法和以及加载后的立即执行的函数</p></li> <li><p>将import函数转化为__webpack_require__.e(moduleId).then(<strong>webpack_require</strong>.bind(null, moduleId))</p></li> <li><p>__webpack_require__是加载模块的方法，<strong>webpack_require</strong>.e中为动态加载模块绑定了一个promise数组，并添加script标签去加载动态模块的代码，<strong>webpack_require</strong>.e返回一个promise</p></li> <li><p>动态模块的代码下载好后会执行一个方法，这个方法主要是resolve该模块对应的promise，这样前面提到的__webpack_require__.e(moduleId).then(<strong>webpack_require</strong>.bind(null, moduleId))，里面的then回调就会执行，then回调里面加载的才是真正的模块代码，返回模块内容后再下一个then回调就可以接受这个结果。</p></li></ul> <h2 id="webpack构建流程"><a href="#webpack构建流程" class="header-anchor">#</a> webpack构建流程</h2> <ol><li>合并配置参数，用参数初始化complier对象，加载配置中的插件，执行run方法开始编译</li> <li>找到入口文件，并使用相应的loader处理，在找出依赖的模块，使用相应的loader处理，依赖的模块的还会依赖其他模块，这是一个递归分析的过程，直至所有的模块都被处理</li> <li>所有的模块都被loader处理完毕后，得到每个模块的处理后的结果以及他们依赖关系</li> <li>根据入口文件以及模块之间的依赖关系，组装成一个个包含一个或多个模块的chunk，将每个chunk文件转化为单独的文件加入到输出列表</li> <li>输出文件，得到编译后的结果</li></ol> <ul><li>webpack会在以上的过程中发出的特定的事件，订阅了这些事件的插件可以在相应的时机去执行相应的任务</li></ul> <h2 id="webpack构建打包优化"><a href="#webpack构建打包优化" class="header-anchor">#</a> webpack构建打包优化</h2> <p><a href="https://zhuanlan.zhihu.com/p/193663299" target="_blank" rel="noopener noreferrer">Webpack4中的Tree-Shaking<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.cnblogs.com/lzkwin/p/11878509.html" target="_blank" rel="noopener noreferrer">Webpack 4 Tree Shaking 终极优化指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>使用webpack-uglify-parallel来提升uglifyPlugin的压缩速度</li> <li>使用Happypack 实现多线程加速编译</li></ul> <h2 id="webpack打包优化前端性能"><a href="#webpack打包优化前端性能" class="header-anchor">#</a> webpack打包优化前端性能</h2> <ol><li>压缩代码</li> <li>构建时将静态资源路径替换成对应cdn</li> <li>使用tree-shaking手段删除死代码</li></ol> <h3 id="webpack中babel的配置"><a href="#webpack中babel的配置" class="header-anchor">#</a> webpack中babel的配置</h3> <ul><li>相关文章</li></ul> <ol><li><a href="https://github.com/SunshowerC/blog/issues/4" target="_blank" rel="noopener noreferrer">@babel/polyfill 与 @babel/plugin-transform-runtime 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jianshu.com/p/ed24b0ba8792" target="_blank" rel="noopener noreferrer">@babel/preset-env 与@babel/plugin-transform-runtime 使用及场景区别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://babeljs.io/docs/en" target="_blank" rel="noopener noreferrer">babel官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <p>webpack构建的前端项目中js模块会经过babel及其相关插件的处理，最后输出能被浏览器正常运行的js文件。webpack中涉及到babel配置有</p> <ul><li><p>在webpack的module中配置babel-loader</p></li> <li><p>以下几种方式都可以配置babel的具体选项</p> <ol><li>在package.json的babel选项中配置具体的选项</li> <li>在项目根目录中新建.babelrc配置文件 默认是json格式 也可以写成js文件通过module.exports导出。</li></ol></li> <li><p>.babelrc中的preset选项 @babel/preset-env + corejs3</p> <ol><li>useBuiltIns = useage 会参考目标浏览器（browserslist） 和 代码中所使用到的特性来按需加入 polyfill</li> <li>useBuiltIns = entry  这是一种入口导入方式, 只要我们在打包配置入口 或者 文件入口写入 import &quot;core-js&quot; 这样一串代码， babel 就会替我们根据当前你所配置的目标浏览器(browserslist)来引入所需要的polyfill 。</li></ol></li> <li><p>利用 @babel/plugin-transform-runtime 插件还能以沙箱垫片的方式防止污染全局， 并抽离公共的 helper function , 以节省代码的冗余</p></li> <li><p>.babelrc中plugin选项 的@babel/plugin-tranform-runtime + @babel/runtime</p></li> <li><p>在package.json中的browserlist或者根目录的browserlistrc文件的配置项， 决定了js兼容的浏览器范围</p></li> <li><p>@babel/preset-env和@babel/plugin-transform-runtime配置其中一个就可以</p></li></ul> <h3 id="webpack构建的项目中css的兼容性配置"><a href="#webpack构建的项目中css的兼容性配置" class="header-anchor">#</a> webpack构建的项目中css的兼容性配置</h3> <ul><li>需要安装 post-loader和postcss-preset-env</li> <li>postcss-preset-env会将最新的CSS语法转换为目标环境的浏览器能够理解的CSS语法</li> <li>postcss-preset-env使用browserslist来配置目标环境</li> <li>postcss-preset-env集成了autoprefixer</li></ul> <h3 id="wwebpack4中hash、chunkhash和contenthash三者的区别"><a href="#wwebpack4中hash、chunkhash和contenthash三者的区别" class="header-anchor">#</a> wwebpack4中hash、chunkhash和contenthash三者的区别</h3> <ol><li>hash是跟整个项目的构建相关，构建生成的文件hash值都是一样的，所以hash计算是跟整个项目的构建相关，同一次构建过程中生成的hash都是一样的，只要项目里有文件更改，整个项目构建的hash值都会更改。</li></ol> <p><strong>如果出口是hash，那么一旦针对项目中任何一个文件的修改，都会构建整个项目，重新获取hash值，缓存的目的将失效。</strong></p> <ol start="2"><li>chunkhash根据不同的入口文件(Entry)进行依赖文件解析、构建对应的chunk，生成对应的哈希值。在生产环境里把一些公共库和程序入口文件区分开，单独打包构建，接着我们采用chunkhash的方式生成哈希值，那么只要我们不改动公共库的代码，就可以保证其哈希值不会受影响。并且webpack4中支持了异步import功能，固，chunkhash也作用于此</li></ol> <p><strong>但是这样又有一个问题，因为我们是将样式作为模块import到JavaScript文件中的，所以它们的chunkhash是一致的</strong></p> <ol start="3"><li>但是这样又有一个问题，因为我们是将样式作为模块import到JavaScript文件中的，所以它们的chunkhash是一致的</li></ol> <h3 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> tree-shaking</h3> <ol><li><p>Webpack 只有在压缩代码的时候会 tree-shaking, 通常就指是生产环境,在开发环境会对未被使用的代码进行注释标记</p></li> <li><p>代码的 module 引入必须是 import 的引入方式，也就是要是用es6 module方式书写代码</p></li> <li><p>在 package.json 文件中将 sideEffects 设为 false</p></li> <li><p>将css相关 loader中 sideEffects 设为 true</p></li> <li><p>让@babel/preset-env 不要将 ES6 模块转化为其他模块规范 modules值设置为 false</p></li> <li><p>使用TerserPlugin，js代码压缩插件(webpack 自带)</p></li></ol> <p>参考<a href="https://blog.csdn.net/weixin_30428981/article/details/112160362" target="_blank" rel="noopener noreferrer">Webpack的Tree Shaking实战<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/blueprint1453/blog/edit/master/docs/plan/webpack.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.e1155b3d.js" defer></script><script src="/blog/assets/js/2.e084e2b5.js" defer></script><script src="/blog/assets/js/44.e25e2539.js" defer></script>
  </body>
</html>
